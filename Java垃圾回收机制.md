#### 1、判定对象是否需要回收算法

- **引用计数法**

  - 通过在对象中添加一个引用计数器,每当有一个地方引用该对象时,计数器的值就加一,当引用失效时,计数值减一.任何时刻计数器值为零的对象就是无法被使用的,需要进行回收.
  - 优点：高效
  - 缺点：相互引用问题。例如，对象A和B分别有一个指向对方的引用，导致它们的引用计数都不为零，因此计数算法就无法回收这两个对象。
  - 主流的Java虚拟机并不采用这种方式

- **可达性分析**

  - 通过一系列被标记为根对象（GC Roots）作为起始节点，然后从这些节点出发，通过引用关系向下搜索，搜索过程中经过的路径称之为“引用链”。如果某个对象到根节点之间没有任何引用链（不可达），则证明该对象是不能被使用的。

    ![image-20201121161425917](https://raw.githubusercontent.com/StuOfBupt/MyTypora/master/img/image-20201121161425917.png?token=AHMLWBONCSPY5GM7P7V7CKC7XDGKW)

  - GC Roots一般有：

    - 虚拟机栈中引用的对象，例如各个线程中被调用的方法堆栈中使用的到的参数、局部变量、临时变量等
    - 方法区的静态属性引用对象、常量引用对象
    - Java虚拟机内部的引用，例如基本数据类型对应的Class对象、常驻的异常对象
    - 被同步锁持有的对象